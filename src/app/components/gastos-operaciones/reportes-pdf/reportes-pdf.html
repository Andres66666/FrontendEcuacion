<div class="container mt-4">
  <div class="row mb-4">
    <div class="col-12 d-flex flex-wrap justify-content-start align-items-center gap-2">
      <button class="btn btn-outline-secondary" (click)="refrescarItems()">
        <i class="bi bi-arrow-clockwise me-1"></i>Refrescar Datos
      </button>

      <button
        class="btn btn-outline-primary"
        (click)="exportPDFGeneral()"
        title="Generar Reportes Proyecto General"
      >
        <i class="bi bi-file-earmark-pdf me-2"></i>Reporte General
      </button>
      <button
        class="btn btn-outline-success"
        (click)="generarReporteGeneralPDF()"
        title="Generar Reporte Financiero General"
      >
        <i class="bi bi-cash-coin me-2"></i>Reporte Financiero General
      </button>

      <div *ngIf="gastosRegistrados.length === 0" class="alert alert-info py-2 my-0">
        No hay gastos registrados.
      </div>
    </div>
  </div>

  <div class="row g-4">
    <div class="col-lg-6 col-md-6" *ngIf="gastosRegistrados.length > 0">
      <div class="card shadow-sm h-100">
        <div class="card-header  text-dark fw-bold">
          <i class="bi bi-tag-fill me-2"></i>REPORTES POR TIPO DE GASTO
        </div>
        <div class="card-body d-flex flex-wrap gap-2">
          <button class="btn btn-outline-warning" (click)="generarPDFMaterialesProyecto()">
            <i class="bi bi-box me-2"></i>Materiales
          </button>
          <button class="btn btn-outline-warning" (click)="generatePDFManoDeObraProyecto()">
            <i class="bi bi-person-fill me-2"></i>Mano de Obra
          </button>
          <button class="btn btn-outline-warning" (click)="generatePDFEquipoHerramientaProyecto()">
            <i class="bi bi-tools me-2"></i>Equipo y Herramientas
          </button>
        </div>
      </div>
    </div>

    <div class="col-lg-6 col-md-6" *ngIf="gastosRegistrados.length > 0">
      <div class="card shadow-sm h-100">
        <div class="card-header text-dark fw-bold">
          <i class="bi bi-list-ol me-2"></i>REPORTES FINANCIEROS POR ÍTEM
        </div>
        <div class="card-body">
          <div class="dropdown w-100">
            <button
              class="btn text-dark dropdown-toggle w-100 text-start "
              type="button"
              id="dropdownReporteItem"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              Seleccionar Ítem para Reporte Financiero
            </button>
            <ul
              class="dropdown-menu w-100"
              aria-labelledby="dropdownReporteItem"
              style="max-height: 300px; overflow-y: auto;"
            >
              <li *ngFor="let item of gastosRegistrados; let i = index">
                <a
                  class="dropdown-item"
                  href="javascript:void(0)"
                  (click)="generarReporteFinanciero(item)"
                  title="Generar reporte para {{ item.descripcion }}"
                >
                  <i class="bi bi-file-earmark-text me-2"></i>
                  <span class="fw-bold">{{ obtenerNumeroParaGasto(i) }}</span> - 
                  {{ item.descripcion?.substring(0, 70) || "Sin descripción" }}{{ (item.descripcion?.length || 0) > 70 ? "..." : "" }}
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>